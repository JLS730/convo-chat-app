(this["webpackJsonpconvo-chat-app"]=this["webpackJsonpconvo-chat-app"]||[]).push([[0],{158:function(e,t,n){},347:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(37),i=n.n(o),s=n(152),r=n(10),u=(n(158),n(51)),h=(n(163),u.a.initializeApp({apiKey:"".concat("AIzaSyB-EgmEMQh_GY3rsjgJRuYAkhy9gttGRA0"),authDomain:"convo-chat-app-e8889.firebaseapp.com",projectId:"convo-chat-app-e8889",storageBucket:"convo-chat-app-e8889.appspot.com",messagingSenderId:"504181463681",appId:"1:504181463681:web:eb14bb758f4d38f953cb80"}).auth()),p=n(8),l=function(){var e=function(e){e.target.classList.contains("login-google")?h.signInWithRedirect(new u.a.auth.GoogleAuthProvider):h.signInWithRedirect(new u.a.auth.FacebookAuthProvider)};return Object(p.jsx)("main",{className:"login-section",children:Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsx)("h2",{className:"login-title",children:"Please Select Login"}),Object(p.jsxs)("div",{className:"login-options-container",children:[Object(p.jsxs)("div",{className:"login-google login",onClick:function(t){return e(t)},children:[Object(p.jsx)("i",{className:"fab fa-google"})," Login with Google"]}),Object(p.jsxs)("div",{className:"login-facebook login",onClick:function(t){return e(t)},children:[Object(p.jsx)("i",{className:"fab fa-facebook-f"})," Login with Facebook"]})]})]})})},j=n(22),b=n.n(j),d=n(35),f=n(17),g=n(153),m=c.a.createContext(),O=function(e){var t=e.children,n=Object(a.useState)(!0),c=Object(f.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)({}),u=Object(f.a)(s,2),l=u[0],j=u[1],b=Object(r.f)();Object(a.useEffect)((function(){h.onAuthStateChanged((function(e){j(e),i(!1),e?b.push("/chat"):b.push("/")}))}),[l,b]);var d={user:l};return Object(p.jsx)(m.Provider,{value:d,children:!o&&t})},v=n(9),x=n.n(v),N=function(){var e=Object(r.f)(),t=Object(a.useContext)(m).user,n=Object(a.useState)(),o=Object(f.a)(n,2),i=o[0],s=o[1],u=function(){var t=Object(d.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.signOut();case 2:e.push("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return a=e.sent,e.abrupt("return",new File([a],"userImage.jpg",{type:"image/jpg"}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t?x.a.get("https://api.chatengine.io/users/me/",{headers:{"Project-ID":"4d12526b-40f4-4520-aa45-7fae380057f6","User-Name":t.email,"User-Secret":t.uid}}).then((function(){s(!1)})).catch((function(){var e=new FormData;e.append("email",t.email),e.append("username",t.email),e.append("secret",t.uid),l(t.photoURL).then((function(t){e.append("avatar",t,t.name),x.a.post("https://api.chatengine.io/users",e,{headers:{"private-key":"".concat("15c9d15a-722d-47ce-a160-bf1ad11cd869")}}).then((function(){s(!1)})).catch((function(e){console.log(e)}))}))})):e.push("/")}),[t,e]),!t||i?"Now Loading...":Object(p.jsxs)(c.a.Fragment,{children:[Object(p.jsxs)("nav",{className:"navigation-bar",children:[Object(p.jsx)("h2",{className:"navigation-title",children:"Convo Chat App"}),Object(p.jsx)("button",{type:"button",className:"logout-button",onClick:u,children:"Logout"})]}),Object(p.jsx)("div",{style:{fontFamily:"'Noto Sans', sans-serif"},children:Object(p.jsx)(g.d,{height:"calc(100vh - 50px)",projectID:"4d12526b-40f4-4520-aa45-7fae380057f6",userName:t.email,userSecret:t.uid})})]})},k=function(){return Object(p.jsx)(s.a,{children:Object(p.jsx)(O,{children:Object(p.jsxs)(r.c,{children:[Object(p.jsx)(r.a,{path:"/chat",component:N}),Object(p.jsx)(r.a,{path:"/",component:l})]})})})};i.a.render(Object(p.jsx)(k,{}),document.getElementById("root"))}},[[347,1,2]]]);
//# sourceMappingURL=main.d4c9f811.chunk.js.map